# よくある質問

## ARISE-PIPELINE導入利用前に 
- ARISE-PIPELINEをつかえる環境は？
  - Terrasium(SparkOnEkS)のRAIZINオープン分析。EMRは未対応
- サポートするモデルに制限はあるか
  - PySparkで扱えるものが対象になる。そのため深層学習・Prophet等は非対称。
- インストール方法が知りたいです。
  - (インストールのページリンク)こちらをみてください。

## 基本的な内容
- とりあえず使い方をしりたい。まず何から始めれば？
  - 使いたいパイプラインの基本編をよんでください。
    - マートパイプライン(リンク)
    - MLパイプライン(リンク)
  
- 全体的なコードベースでの使い方を知りたいです。
  - サンプルノートブックが以下のリンクにあります。
    - マートパイプライン(作成中)
    - MLパイプライン(リンク)

- 実行結果を吐き出されるパスを教えてください
  - runコマンドをたたくとログは出力されるセルに保存先のパスを書いています。なお，各種yamlファイルの値を変えるとパスが変わるので注意してください。(実験番号がyamlの値をもとに生成しているため。)

## 応用編
- 実行中に失敗していた部分から再開するには?
  - `from_procs` や `from_nodes` にて指定したプロセスもしくはノード以降を指定できます。詳しくはこちら(リンク)

- パイプライン単体(例えばFeaturePipelineだけ)を実行したい
  - makeコマンドの引数`procs`を利用するとできます。詳しくはこちら(リンク)

- train，predictをまず実行して色々確認した後にevaluateのみを実行したい
- 下記のように，インスタンスを分けて個別で実行するといいです。
  - `instance1 = ml_pipeline.make(tags=["train", "predict"])`
  - `instance2 = ml_pipeline.make(tags=["evaluate"])`
  
- 評価指標だけを見たいため保存処理を行ず実行時間を軽くしたい。join処理後のデータおよびモデルのアウトプットの保存をしない方法はあるか?
  - 保存したくないデータにてカタログ上で`MemoryDataSet(copy_mode=”assign”)`としてください。詳しい書き方はこちら(Catalogのリンク)
  
- `show`コマンドで表示した結果の順序は？
  - `print(your_piepeline.show())`を実行すると下記のように入力・ノード名・出力名が表示されます。ノード名の表示順が実行順序です。下記例でいうと`feature_sdf_func`->`filter_train_test`-> ・・・という順番。
```
※RAIZINでコピペ予定
#### Pipeline execution order ####
Inputs: iris_features

feature_sdf_func() -> []
filter_train_test() -> []
・
・
・
Outputs： ・・・
##########
```
  
- Joinキーを指定したいが，縦幅マートと他マートのキー名が異なるケースではrenameする必要があるか？
  - あります。join_keysに入力したリストを両方のマートでキーとして結合を行ってるので，列名変更が必要にです。

- モデルのfit直前のデータを保存する方法はあるか
  - 直接的にはありません。
  - 暫定的な対処法ですが何もしないmain_model用のパイプラインを定義すればtrain_predsやval_predsとして吐き出さるのでそれを保存したらいけはします。※Optunaとの兼ね合いでノードが一つになっているので取り出せない。
- testデータに対する実行フローはどうなっていますか
  - 以下のとおり。テストデータはすぐにラベルが手に入らない可能性があるので予測結果にマージしている。なおtrainはドキュメント記載のとおり(Target⇒Feature⇒Label⇒Join⇒Model)
    1. 特徴量作成（feature）
    2. 予測（model）
    3. ラベル作成（label）
    4. 予測結果にラベルマージ（join）
    5. 評価（post）

## その他
- 2値分類以外のアルゴリズムはつかえますか
  - つかえます。ModelPipelineParamsにて所望のアルゴリズムを定義してください。
  
- CustomerGenomeの結合はどのようにしますか。
  - `FeaturePipelineParams`定義時にinputを利用したいCGマートとしてください。
  
- Nostraでいう説明変数選択シートのような機能はありますか
  - parameters.ymlで利用する特徴量列を束ねたパラメータを定義し，それをselectするようにしたら似たようなことはできます。
  
- Nostraにあったアセスメント機能はありますか
  - v1.0.0時点では未対応です。要望が多ければ追加するかもしれません。
  
## 上記で解決しないとき
  - 下記担当者に質問してください。
    - CAD-VDU-高度分析T： 山里飛鳥(Asuka Yamazato)
    - CAD-VDU-高度分析T： 池元優介(Yusuke Ikemoto)
